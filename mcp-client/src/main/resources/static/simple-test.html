<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP å·¥å…·è°ƒç”¨æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .section h2 {
            color: #555;
            margin-top: 0;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            background-color: #e9ecef;
            border-left: 4px solid #007bff;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
        }
        .error {
            border-left-color: #dc3545;
            background-color: #f8d7da;
            color: #721c24;
        }
        .success {
            border-left-color: #28a745;
            background-color: #d4edda;
            color: #155724;
        }
        textarea {
            width: 100%;
            height: 200px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
        }
        .example-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        .example-btn {
            background-color: #28a745;
            padding: 8px 12px;
            font-size: 12px;
        }
        .example-btn:hover {
            background-color: #218838;
        }
        .info-box {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .info-box h3 {
            margin-top: 0;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ—ºï¸ é«˜å¾·åœ°å›¾ MCP å·¥å…·è°ƒç”¨æµ‹è¯•</h1>
        
        <div class="info-box">
            <h3>ğŸ“‹ å¯ç”¨å·¥å…·åˆ—è¡¨</h3>
            <p><strong>1. maps_text_search</strong> - å…³é”®è¯æœç´¢ POI</p>
            <p><strong>2. maps_geo</strong> - åœ°å€è½¬åæ ‡</p>
            <p><strong>3. maps_regeocode</strong> - åæ ‡è½¬åœ°å€</p>
            <p><strong>4. maps_weather</strong> - å¤©æ°”æŸ¥è¯¢</p>
            <p><strong>5. maps_direction_driving</strong> - é©¾è½¦è·¯å¾„è§„åˆ’</p>
            <p><strong>6. maps_direction_walking</strong> - æ­¥è¡Œè·¯å¾„è§„åˆ’</p>
            <p><strong>7. maps_around_search</strong> - å‘¨è¾¹æœç´¢</p>
            <p><strong>8. maps_distance</strong> - è·ç¦»æµ‹é‡</p>
            <p>ç­‰ç­‰... å…±12ä¸ªå·¥å…·</p>
        </div>

        <div class="section">
            <h2>ğŸš€ å¿«é€Ÿç¤ºä¾‹</h2>
            <div class="example-buttons">
                <button class="example-btn" onclick="loadExample('search')">POI æœç´¢</button>
                <button class="example-btn" onclick="loadExample('geocode')">åœ°å€è½¬åæ ‡</button>
                <button class="example-btn" onclick="loadExample('regeocode')">åæ ‡è½¬åœ°å€</button>
                <button class="example-btn" onclick="loadExample('weather')">å¤©æ°”æŸ¥è¯¢</button>
                <button class="example-btn" onclick="loadExample('driving')">é©¾è½¦è·¯å¾„</button>
                <button class="example-btn" onclick="loadExample('walking')">æ­¥è¡Œè·¯å¾„</button>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“ JSON æŒ‡ä»¤è¾“å…¥</h2>
            <textarea id="jsonInput" placeholder='è¾“å…¥ JSON æŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼š
{
  "server_name": "amap-maps",
  "tool_name": "maps_text_search",
  "arguments": {
    "keywords": "åŒ—äº¬å¤©å®‰é—¨",
    "city": "åŒ—äº¬"
  }
}'></textarea>
            <br><br>
            <button onclick="generateGrpcCommand()">ç”Ÿæˆ gRPC è°ƒç”¨å‘½ä»¤</button>
            <button onclick="clearInput()">æ¸…ç©ºè¾“å…¥</button>
        </div>

        <div class="section">
            <h2>ğŸ“Š gRPC è°ƒç”¨ä¿¡æ¯</h2>
            <div id="result" class="result">
ç­‰å¾…ç”Ÿæˆ gRPC è°ƒç”¨å‘½ä»¤...

ğŸ’¡ ä½¿ç”¨è¯´æ˜ï¼š
1. é€‰æ‹©ä¸Šé¢çš„å¿«é€Ÿç¤ºä¾‹æˆ–æ‰‹åŠ¨è¾“å…¥ JSON æŒ‡ä»¤
2. ç‚¹å‡»"ç”Ÿæˆ gRPC è°ƒç”¨å‘½ä»¤"
3. å¤åˆ¶ç”Ÿæˆçš„ grpcurl å‘½ä»¤åˆ°å‘½ä»¤è¡Œæ‰§è¡Œ
4. æŸ¥çœ‹å®é™…çš„å·¥å…·è°ƒç”¨ç»“æœ
            </div>
        </div>

        <div class="section">
            <h2>â„¹ï¸ ç³»ç»Ÿä¿¡æ¯</h2>
            <div class="result">
<strong>MCP å®¢æˆ·ç«¯æœåŠ¡ï¼š</strong>
â€¢ Web æœåŠ¡å™¨: http://localhost:8086
â€¢ gRPC æœåŠ¡å™¨: localhost:9090
â€¢ H2 æ•°æ®åº“æ§åˆ¶å°: http://localhost:8086/h2-console

<strong>æµ‹è¯•æ–¹æ³•ï¼š</strong>
1. åœ¨ä¸Šé¢è¾“å…¥ JSON æŒ‡ä»¤
2. ç”Ÿæˆ gRPC è°ƒç”¨å‘½ä»¤
3. åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ grpcurl å‘½ä»¤
4. æŸ¥çœ‹é«˜å¾·åœ°å›¾ API çš„å®é™…è¿”å›ç»“æœ

<strong>æ³¨æ„ï¼š</strong>
â€¢ éœ€è¦å®‰è£… grpcurl å·¥å…·
â€¢ ç¡®ä¿ MCP å®¢æˆ·ç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ
â€¢ é«˜å¾·åœ°å›¾ API éœ€è¦æœ‰æ•ˆçš„ API Key
            </div>
        </div>
    </div>

    <script>
        // ç¤ºä¾‹æŒ‡ä»¤æ¨¡æ¿
        const examples = {
            search: {
                server_name: "amap-maps",
                tool_name: "maps_text_search",
                arguments: {
                    keywords: "åŒ—äº¬å¤©å®‰é—¨",
                    city: "åŒ—äº¬"
                }
            },
            geocode: {
                server_name: "amap-maps",
                tool_name: "maps_geo",
                arguments: {
                    address: "åŒ—äº¬å¸‚æœé˜³åŒºæœ›äº¬SOHO",
                    city: "åŒ—äº¬"
                }
            },
            regeocode: {
                server_name: "amap-maps",
                tool_name: "maps_regeocode",
                arguments: {
                    location: "116.397428,39.90923"
                }
            },
            weather: {
                server_name: "amap-maps",
                tool_name: "maps_weather",
                arguments: {
                    city: "åŒ—äº¬"
                }
            },
            driving: {
                server_name: "amap-maps",
                tool_name: "maps_direction_driving",
                arguments: {
                    origin: "116.397428,39.90923",
                    destination: "116.481488,39.990464"
                }
            },
            walking: {
                server_name: "amap-maps",
                tool_name: "maps_direction_walking",
                arguments: {
                    origin: "116.397428,39.90923",
                    destination: "116.481488,39.990464"
                }
            }
        };

        function loadExample(type) {
            const example = examples[type];
            if (example) {
                document.getElementById('jsonInput').value = JSON.stringify(example, null, 2);
                showResult(`å·²åŠ è½½ ${type} ç¤ºä¾‹æŒ‡ä»¤ï¼Œç‚¹å‡»"ç”Ÿæˆ gRPC è°ƒç”¨å‘½ä»¤"æŒ‰é’®ç»§ç»­`, 'info');
            }
        }

        function generateGrpcCommand() {
            const jsonInput = document.getElementById('jsonInput').value.trim();
            
            if (!jsonInput) {
                showResult('è¯·å…ˆè¾“å…¥ JSON æŒ‡ä»¤', 'error');
                return;
            }

            let command;
            try {
                command = JSON.parse(jsonInput);
            } catch (error) {
                showResult(`JSON æ ¼å¼é”™è¯¯:\n${error.message}`, 'error');
                return;
            }

            if (!command.server_name || !command.tool_name) {
                showResult('JSON æŒ‡ä»¤å¿…é¡»åŒ…å« server_name å’Œ tool_name å­—æ®µ', 'error');
                return;
            }

            const grpcRequest = {
                server_name: command.server_name,
                tool_name: command.tool_name,
                arguments: command.arguments || {}
            };

            // ä¸º Windows PowerShell ç”Ÿæˆæ­£ç¡®çš„å‘½ä»¤æ ¼å¼
            const jsonString = JSON.stringify(grpcRequest).replace(/"/g, '\\"');
            const grpcCommand = `grpcurl -plaintext -d "${jsonString}" localhost:9090 com.mcp.grpc.MCPClientService/CallTool`;

            // ä¹Ÿæä¾› proto æ–‡ä»¶ç‰ˆæœ¬ï¼ˆæ›´å¯é ï¼‰
            const grpcCommandWithProto = `grpcurl -plaintext -proto mcp-service.proto -d "${jsonString}" localhost:9090 com.mcp.grpc.MCPClientService/CallTool`;

            const result = `ğŸš€ gRPC è°ƒç”¨ä¿¡æ¯ç”ŸæˆæˆåŠŸï¼

ğŸ“‹ è¯·æ±‚å†…å®¹ï¼š
${JSON.stringify(grpcRequest, null, 2)}

ğŸ”§ Windows PowerShell å‘½ä»¤ï¼ˆæ¨èï¼‰ï¼š
${grpcCommand}

ğŸ”§ ä½¿ç”¨ proto æ–‡ä»¶çš„å‘½ä»¤ï¼ˆæ›´å¯é ï¼‰ï¼š
${grpcCommandWithProto}

ğŸ“ ä½¿ç”¨æ­¥éª¤ï¼š
1. ç¡®ä¿ MCP å®¢æˆ·ç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ (localhost:9090)
2. å®‰è£… grpcurl å·¥å…· (å¦‚æœè¿˜æ²¡æœ‰å®‰è£…)
3. å¤åˆ¶ä¸Šé¢çš„ä»»ä¸€å‘½ä»¤åˆ° PowerShell ä¸­æ‰§è¡Œ
4. æŸ¥çœ‹é«˜å¾·åœ°å›¾ API çš„å®é™…è¿”å›ç»“æœ

ğŸ’¡ æç¤ºï¼š
â€¢ Windows ç”¨æˆ·æ¨èä½¿ç”¨ä¸Šé¢è½¬ä¹‰åçš„å‘½ä»¤æ ¼å¼
â€¢ proto æ–‡ä»¶ç‰ˆæœ¬æ›´å¯é ï¼Œä¸ä¾èµ–åå°„ API
â€¢ ç¡®ä¿é«˜å¾·åœ°å›¾ API Key é…ç½®æ­£ç¡®
â€¢ æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—äº†è§£è¯¦ç»†çš„æ‰§è¡Œè¿‡ç¨‹

ğŸ“ æ–‡ä»¶è¾“å…¥æ–¹å¼ï¼ˆé¿å…è½¬ä¹‰é—®é¢˜ï¼‰ï¼š
1. å°†è¯·æ±‚å†…å®¹ä¿å­˜ä¸º request.json æ–‡ä»¶
2. ä½¿ç”¨å‘½ä»¤ï¼šgrpcurl -plaintext -proto mcp-service.proto -d @request.json localhost:9090 com.mcp.grpc.MCPClientService/CallTool`;

            showResult(result, 'success');
        }

        function clearInput() {
            document.getElementById('jsonInput').value = '';
            showResult('è¾“å…¥å·²æ¸…ç©ºï¼Œç­‰å¾…æ–°çš„æŒ‡ä»¤...', 'info');
        }

        function showResult(content, type = 'info') {
            const element = document.getElementById('result');
            element.className = `result ${type}`;
            element.textContent = content;
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
        window.onload = function() {
            showResult('é¡µé¢å·²åŠ è½½ï¼Œè¯·é€‰æ‹©ç¤ºä¾‹æˆ–è¾“å…¥è‡ªå®šä¹‰ JSON æŒ‡ä»¤å¼€å§‹æµ‹è¯•', 'info');
        };
    </script>
</body>
</html>
